---
import "../styles.css";
---
<html>
  <body>
    <main class="card">
      <h2>Login</h2>
      <label>Email</label>
      <input id="email" type="email"/>
      <label>Password</label>
      <input id="password" type="password"/>
      <button id="btnLogin" class="btn">Login</button>
      <p id="msg" class="muted"></p>
    </main>
    <script type="module">
      document.getElementById('btnLogin').addEventListener('click', async () => {
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const res = await fetch('/api/login', {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({email, password})
        });
        const j = await res.json();
        if (res.ok && j.ok) window.location = '/dashboard';
        else document.getElementById('msg').textContent = j.error || 'Login failed';
      });
    </script>
  </body>
</html>
