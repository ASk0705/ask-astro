---
import "../styles.css";
---
<html>
  <body>
    <main class="card">
      <h2>Create account</h2>
      <label>Email</label><input id="reg-email" type="email"/>
      <label>Password</label><input id="reg-password" type="password"/>
      <button id="btnRegister" class="btn">Register</button>
      <p id="msg" class="muted"></p>
    </main>
    <script type="module">
      document.getElementById('btnRegister').addEventListener('click', async () => {
        const email = document.getElementById('reg-email').value;
        const password = document.getElementById('reg-password').value;
        const r = await fetch('/api/register', { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({email,password})});
        const j = await r.json();
        if (r.ok && j.ok) { alert('Registered'); window.location = '/login'; }
        else document.getElementById('msg').textContent = j.error || 'Registration failed';
      });
    </script>
  </body>
</html>
